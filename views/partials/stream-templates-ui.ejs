<!-- Template Selector Modal -->
<div id="templateSelectorModal" class="fixed inset-0 bg-black/50 z-50 hidden modal-overlay">
  <div class="flex min-h-screen items-center justify-center p-4">
    <div class="bg-dark-800 rounded-lg shadow-xl w-full max-w-2xl modal-container transform transition-all duration-200 scale-95 opacity-0">
      <!-- Header -->
      <div class="flex items-center justify-between px-6 py-4 border-b border-gray-700">
        <div class="flex items-center gap-3">
          <h3 class="text-lg font-semibold flex items-center gap-2">
            <i class="ti ti-template text-primary"></i>
            My Templates
          </h3>
          <span id="selectedTemplatesCount" class="hidden text-xs px-2 py-1 bg-primary/20 text-primary rounded">
            0 selected
          </span>
        </div>
        <div class="flex items-center gap-2">
          <button onclick="exportSelectedTemplates()" id="exportSelectedBtn"
            class="hidden flex items-center gap-1.5 px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded text-sm transition-colors">
            <i class="ti ti-download text-sm"></i>
            <span>Export Selected</span>
          </button>
          <button onclick="exportAllTemplates()"
            class="flex items-center gap-1.5 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm transition-colors">
            <i class="ti ti-file-export text-sm"></i>
            <span>Export All</span>
          </button>
          <button onclick="closeTemplateSelector()" class="text-gray-400 hover:text-white transition-colors">
            <i class="ti ti-x text-xl"></i>
          </button>
        </div>
      </div>
      
      <!-- Content -->
      <div class="px-6 py-4 max-h-[60vh] overflow-y-auto">
        <div id="templateListContainer" class="space-y-3">
          <!-- Templates will be loaded here -->
          <div class="text-center py-8">
            <i class="ti ti-loader animate-spin text-3xl text-gray-400"></i>
            <p class="text-gray-400 mt-2">Loading templates...</p>
          </div>
        </div>
      </div>
      
      <!-- Footer -->
      <div class="flex items-center justify-between px-6 py-4 border-t border-gray-700 bg-dark-900">
        <p class="text-xs text-gray-400">
          <i class="ti ti-info-circle mr-1"></i>
          Click template to load, or select multiple to export
        </p>
        <button onclick="closeTemplateSelector()" 
          class="px-4 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded transition-colors">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Save Template Modal -->
<div id="saveTemplateModal" class="fixed inset-0 bg-black/50 z-50 hidden modal-overlay">
  <div class="flex min-h-screen items-center justify-center p-4">
    <div class="bg-dark-800 rounded-lg shadow-xl w-full max-w-md modal-container transform transition-all duration-200 scale-95 opacity-0">
      <!-- Header -->
      <div class="flex items-center justify-between px-6 py-4 border-b border-gray-700">
        <h3 class="text-lg font-semibold flex items-center gap-2">
          <i class="ti ti-device-floppy text-green-400"></i>
          Save as Template
        </h3>
        <button onclick="closeSaveTemplateModal()" class="text-gray-400 hover:text-white transition-colors">
          <i class="ti ti-x text-xl"></i>
        </button>
      </div>
      
      <!-- Content -->
      <div class="px-6 py-4">
        <div class="space-y-4">
          <div>
            <label class="text-sm font-medium text-white block mb-2">
              Template Name <span class="text-red-400">*</span>
            </label>
            <input type="text" id="templateName" 
              class="w-full px-4 py-2.5 bg-dark-700 border border-gray-600 rounded-lg focus:border-primary focus:ring-1 focus:ring-primary"
              placeholder="e.g., YouTube Gaming Setup" required>
          </div>
          
          <div>
            <label class="text-sm font-medium text-white block mb-2">
              Description <span class="text-gray-400 text-xs">(optional)</span>
            </label>
            <textarea id="templateDescription" rows="3"
              class="w-full px-4 py-2.5 bg-dark-700 border border-gray-600 rounded-lg focus:border-primary focus:ring-1 focus:ring-primary resize-none"
              placeholder="Brief description of this template..."></textarea>
          </div>
          
          <div class="bg-blue-500/10 border border-blue-500/30 rounded-lg p-3">
            <p class="text-xs text-blue-300 flex items-start gap-2">
              <i class="ti ti-info-circle text-sm mt-0.5"></i>
              <span>This will save your current configuration including video selection, stream settings, schedules, and recurring patterns.</span>
            </p>
          </div>
        </div>
      </div>
      
      <!-- Footer -->
      <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-700 bg-dark-900">
        <button onclick="closeSaveTemplateModal()" 
          class="px-4 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded transition-colors">
          Cancel
        </button>
        <button onclick="confirmSaveTemplate()" 
          class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded transition-colors flex items-center gap-2">
          <i class="ti ti-check"></i>
          Save Template
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Include Template JavaScript -->
<script src="/js/stream-templates.js"></script>

<style>
.modal-overlay.active .modal-container {
  transform: scale(1);
  opacity: 1;
}

.template-card {
  transition: all 0.2s ease;
}

.template-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}
</style>
